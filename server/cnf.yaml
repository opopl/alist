
auth:

img:

prj:
  proj: letopis
  rootid : p_sr

  class:
    proj: letopis
    rootid : p_sr

  controller:
    proj: letopis
    rootid : p_sr
###@start.config
    config:
###topics
       topics:
       - name: 'Волонтерство'
         pdf: '/prj/target/pdf?target=vojna.volonter'
       - name: 'Поезія'
         pdf: '/prj/target/pdf?target=vojna.poetry'
       - name: 'Харків'
         pdf: '/prj/target/pdf?target=vojna.harkov'

       templates:
###templates.tabs
          tabs:
            tab_fs:
              secFsNewList:
                table:
                  cols:
                  - _check
                  - _html
                  - _pdf
                  - authors
                  - tags
                  - title
                  - sec
                  header:
                    _html : 'html'
                    _pdf : 'pdf'
                    _check : ''

###templates.iframes
          iframes:
            'iframe_saved':
               height : 'auto'
               width : '100%'
               sandbox : 'allow-same-origin'

###templates.forms
          forms:
            'form_sec_new':
###form_sec_new
              #pre: '<h2>Section</h2>'
              cols:
              - { width : '10%' }
              - { width : '5%' }
              - { width : '50%' }
              - { width : '20%' }
              rows:
              - [ 'label@@ URL:',
                  'button button@class=prj-input-url-clear@Clear',
                  'input text@ class=prj-input-url name=url', '' ]
              - [ 'label@@ Title:'   , '', 'input text@ name=title', '' ]
              - [ 'label@@ Tags:'    ,
                  'button button@class=prj-input-tags-clear@Clear',
                  'input text@ name=tags class=prj-input-tags', '' ]
              - [ 'label@@ Date:'    , '', 'input text@ name=date class=prj-input-date', '' ]
              - [ 'button submit@@Submit', '', 'button button@class=prj-btn-form-reset@Clear Form' ]
###form_img_new
            'form_img_new':
              #pre: '<button value="clear">Clear</button>'
              cols:
              - { width : '10%' }
              - { width : '5%' }
              - { width : '50%' }
              - { width : '20%' }
              rows:
              - [ [
                    'input radio@name=use id=radio_use_url value=url checked',
                    'label@for=radio_use_url@ URL',
                    'input radio@name=use id=radio_use_file value=file',
                    'label@for=radio_use_file@ File',
                  ],
                  '', '' ]
              - [ 'label@@ URL:',
                  'button button@class=prj-input-url-clear@Clear',
                  'input text@ class=prj-input-url name=url', '' ]
              - [ 'label@@File:' ,
                  'button button@class=prj-input-file-clear@Clear',
                  'input file@ name=file class=prj-input-file multiple accept="image/*"', '' ]
              - [ 'label@@Caption:' , '', 'input text@ name=caption', '' ]
              - [ 'label@@Tags:' ,
                  'button button@class=prj-input-tags-clear@Clear',
                  'input text@ class=prj-input-tags name=tags', '' ]
              - [
                    'button submit@@Submit', '',
                    'button button@class=prj-btn-form-reset@Clear Form'
                ]
              #- [ 'label@@ Title:'   , '', 'input text@ id=input_sec_new_title name=title', '' ]
              #- [ 'label@@ Section:' , '', 'input text@ id=input_sec_new_name name=sec', '' ]
              #- [ 'label@@ Tags:' , '', 'input text@ id=input_sec_new_tags name=tags', '' ]
              #- [ 'label@@ Date:'    , '', 'input date@ id=input_sec_new_date name=date', '' ]
              #- [ 'button submit@@Submit', '', '' ]
              #
###form_saved_import
            'form_saved_import':
              cols:
              - { width : '10%' }
              - { width : '10%' }
              - { width : '60%' }
              rows:
              - [ 'label@@ File:','','input file@name=file' ]

###form_auth_new
            'form_auth_new':
              cols:
              - { width : '10%' }
              - { width : '10%' }
              - { width : '60%' }
              rows:
              - [ 'label@@ Name:','','input text@name=plain' ]
              - [ 'label@@ Author Id:','','input text@name=author_id' ]
              - [ 'label@@ URL:','','input text@class=prj-input-url name=url' ]
              - [ 'input submit@hidden@','','' ]

###form_pics_upload
            'form_pics_upload':
              cols:
              - { width : '10%' }
              - { width : '10%' }
              - { width : '60%' }
              rows:
              - [ 'label@@ URL:','','input text@ class=prj-input-url id=input_pic_url name=url' ]
              - [
                    'button button@ id=btn_pic_upload @Upload', '',
                    'button button@ id=btn_pic_clear  @Clear Pics', '',
                ]

              - [ 'button button@ name=load_scrn_fs @Load Screenshots From Filesystem','','' ]
###form_img_edit
            'form_img_edit':
              cols:
              - { width : '10%' }
              - { width : '10%' }
              - { width : '60%' }
              rows:
              - [ 'label@@ Caption','','input text@ class=prj-img-caption name=caption' ]
              - [ 'label@@ URL','button button@@Copy','input text@ class=prj-img-url name=url disabled' ]
###form_img_data
            'form_img_data':
              cols:
              - { width : '10%' }
              - { width : '10%' }
              - { width : '60%' }
              rows:
              - [ 'label@@ url','button button@@copy','input text@ name=url disabled' ]
              - [ 'label@@ url md5','','input text@ name=md5_url disabled' ]
              - [ 'label@@ inum','','input text@name=inum disabled' ]
              - [ 'label@@ caption','','input text@name=caption disabled' ]

              - [ 'label@@ name','','input text@name=name disabled' ]
              - [ 'label@@ name_uniq','','input text@name=name_uniq disabled' ]
              - [ 'label@@ name_orig','','input text@name=name_orig disabled' ]

              - [ 'label@@ tags','','input text@name=tags disabled' ]
              - [ 'label@@ md5','','input text@name=md5 disabled' ]

              - [ 'label@@ width','','input text@name=width disabled' ]
              - [ 'label@@ width_tex','','input text@name=width_tex disabled' ]
              - [ 'label@@ height','','input text@name=height disabled' ]

              - [ 'label@@ url_parent','','input text@name=url_parent disabled' ]
              - [ 'label@@ mtime','','input text@name=mtime disabled' ]
              - [ 'label@@ proj','','input text@name=proj disabled' ]
              - [ 'label@@ sec','','input text@name=sec disabled' ]
              - [ 'label@@ rootid','','input text@name=rootid disabled' ]
###form_img_search
            'form_img_search':
              cols:
              - { width : '10%' }
              - { width : '10%' }
              - { width : '60%' }
              rows:
              - [ 'label@@ inum','', 'input text@ name=inum' ]
              - [ 'label@@ url', '', 'input text@ name=url class=prj-img-url' ]
              - [ 'label@@ md5', '', 'input text@ name=md5' ]

              - [ 'label@@Tags:' ,
                  'button button@class=prj-input-tags-clear@Clear',
                  'input text@ class=prj-input-tags name=tags', '' ]

              - [ 'label@@ sql','','textarea@ name=sql class=prj-input-area@' ]
              - [
                  'button@@Submit',
                  'button button@class=prj-btn-form-reset@Clear Form',
                  'button@name=last@Last',
                  ''
                ]

              - [ 'input submit@hidden@','','' ]

###methods
       methods:

###methods.htmlTags
          htmlTags:
             tagData:
               cities:
               - kiev
               - mariupol
               #- dnipro
               #- harkiv

###methods.htmlSecNew
          htmlSecNew:
             inputList:
             - { tabId : 'tab_sec_new', formId : 'form_sec_new' }
             - { tabId : 'tab_img_new', formId : 'form_img_new' }
             - { tabId : 'tab_auth_new', formId : 'form_auth_new' }

          htmlSecView:
             cols:
             - _check
             - _html
             - _pdf
             - authors
             - tags
             - title
             - sec
             header:
               _html : 'html'
               _pdf : 'pdf'
               _check : ''
          htmlAuthSecs:
             cols:
             - _check
             - _html
             - _pdf
             - date
             - tags
             - title
             - sec
             header:
               _html : 'html'
               _pdf : 'pdf'
               _check : ''
          htmlTagSecs:
             cols:
               db:
               - sec
               - file
               - date
               - title
               html:
               - _check
               - _html
               - _pdf
               - date
               - authors
               - tags
               - title
               - sec
             header:
               _html : 'html'
               _pdf : 'pdf'
               _check : ''

###bld
       bld :
          cols : 'bid buuid plan duration target status'
###ui
       ui :
###ui.tab
          tab :
            saved:
###ui.tab.saved
              iframe:
                sandbox : ''
                width : ''
                height : ''
#              radioList:
              #- { id : 'orig', name : 'Orig' }
              #- { id : 'view', name : 'View' }
              #- { id : 'unwrap', name : 'Unwrap' }
              #- { id : 'parse', name : 'Parse' }
              #- { id : 'content', name : 'Content' }
              #- { id : 'article', name : 'Article' }
              #- { id : 'comments', name : 'Comments' }
              #- { id : 'cmttex', name : 'Comments (TeX)' }

###ui.page
          page :
             'tag' :
                tabs : [ 'html' ]

             'auth' :
                tabs : [ 'html' ]

             'sec@date' :
                tabs : [ 'html' ]

             'sec@post' :
                tabs :
                - 'html'
                - 'pics'
                - 'fs'
                - 'saved'
                - 'pdf'
                - 'tex'
                - 'log'
                - 'bld'
                - 'json'

###ui.tables
          tables:
             '@common':
                dataTable:
###ui.tables.@common.dataTable
                   paging  : true
                   pageLength: 100
                   aLengthMenu: [ [25, 50, 75, -1], [25, 50, 75, "All"] ]
                   autoWidth: false
                   columnDefs:
                   - { "width" : "5%" }
                   - { "width" : "5%" }
                   - { "width" : "5%" }
                   fixedHeader:
                     header: true
                     footer: true
                   buttons: [ 'copy', 'excel', 'pdf' ]

###ui.dialogs
          dialogs:
             '@common':
                autoOpen: false
                resizeable: true
                modal: true

             dialog_saved_import:
                title: "Import Saved File"
                height: 700
                width: 800

             dialog_img_delete:
                title: "Image Deletion"

             dialog_img_data:
                title: "Image Database Data"
                height: 700
                width: 800
             dialog_img_edit:
                title: "Image Edit"
                height: 400
                width: 800

###ui.forms
          forms:
             '@common':
                class:
                  '.prj-input-tags':

                validate:
                  messages:
                    url:
                      required: 'URL REQUIRED'
                      url: 'MUST BE URL'
                      url_img_db : 'ALREADY IN DB'

###ui.forms.form_auth_new
             form_auth_new:
                fields:
                  author_id:
                    autocomplete:
                      url: '/prj/auth/all'
                submit:
                  url: "/prj/auth/new"
                validate:
                  rules:
                    name:
                      required: true
                    author_id:
                      required: true

###ui.forms.form_sec_new
             form_sec_new:
                submit:
                  url: "/prj/sec/new"
                validate :
                  rules:
                    url:
                      required: true
                      url: true
                      url_prj_db: true
                    title:
                      required: true
                    date:
                      required: true

###ui.forms.form_img_search
             form_img_search:
                fields:
                  tags:
                    autocomplete:
                      url: '/img/tag/list'
                submit:
                  url: "/img/data/all"
                  ajax:
                    data:
                      scheme: 'form'
                    opts:
                validate :
                  rules:
                    url:
                      #required: true
                      url: true
                      #url_img_db: true

###ui.forms.form_img_new
             form_img_new:
                submit:
                  url: "/img/new"
                validate :
                  rules:
                    url:
                      required: true
                      url: true
                      url_img_db: true
                    file:
                      required: true
                      #accept: "image/jpeg, image/png, image/pjpeg"
                      #accept: "image/jpeg"

                  messages:
                    url:
                      required: 'URL REQUIRED'
                      url: 'MUST BE URL'
                      url_img_db : 'IMAGE ALREADY IN DATABASE'
